{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
	<base href="">
	<title>Proyect</title>
	<meta name="csrf-token" content="{{ csrf_token }}">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" />

	<!-- <link href="{% static 'css/fullcalendar/fullcalendar.bundle.css' %}" rel="stylesheet" type="text/css" /> -->
	<link href="{% static 'css/plugins.bundle.css' %}" rel="stylesheet" type="text/css" />
	<link href="{% static 'css/style.bundle.css' %}" rel="stylesheet" type="text/css" />


	<link href="{% static 'css/galery/gallery.css' %}" rel="stylesheet" type="text/css" />
	<link href="{% static 'css/galery/jquery.fancybox.css' %}" rel="stylesheet" type="text/css" />
	

	<!--end::Global Stylesheets Bundle-->

	<style>
		.preview {
			width: 200px;
			height: 200px;
			object-fit: cover;
			margin-top: 20px;
			margin-right: 10px;
		}
		.image-container {
			display: flex;
			flex-wrap: wrap;
		}															

	</style>

</head>
<!--end::Head-->
<!--begin::Body-->

<body id="kt_body" class="header-fixed header-tablet-and-mobile-fixed toolbar-enabled toolbar-fixed"
	style="--kt-toolbar-height:55px;--kt-toolbar-height-tablet-and-mobile:55px">
	<!--begin::Main-->
	<!--begin::Root-->
	<div class="d-flex flex-column flex-root">
		<!--begin::Page-->
		<div class="page d-flex flex-row flex-column-fluid">
			<!--begin::Wrapper-->
			<div class="wrapper d-flex flex-column flex-row-fluid" id="kt_wrapper">

				<!--begin::Header-->
				{% include 'header.html' %}
				<!--end::Header-->

				<!--begin::Content-->
				<div class="content d-flex flex-column flex-column-fluid" id="kt_content">

					<!--begin::Toolbar-->
					<div class="toolbar" id="kt_toolbar">

						<!--begin::Container-->
						<div id="kt_toolbar_container" class="container-xxl d-flex flex-stack">

							<!--begin::Page title (Titulo de la página) -->
							<div data-kt-swapper="true" data-kt-swapper-mode="prepend"
								data-kt-swapper-parent="{default: '#kt_content_container', 'lg': '#kt_toolbar_container'}"
								class="page-title d-flex align-items-center flex-wrap me-3 mb-5 mb-lg-0">
								<!--begin::Title-->
								<h1 class="d-flex align-items-center text-dark fw-bolder fs-3 my-1">Proyect</h1>
								<!--end::Title-->
								<!--begin::Separator-->
								<span class="h-20px border-gray-200 border-start mx-4"></span>
								<!--end::Separator-->
								<!--begin::Breadcrumb-->
								<ul class="breadcrumb breadcrumb-separatorless fw-bold fs-7 my-1">
									<!--begin::Item-->
									<li class="breadcrumb-item text-muted">
										<a href="#" class="text-muted text-hover-primary">View</a>
									</li>
								</ul>
								<!--end::Breadcrumb-->

								{% if messages %}
								<div class="alert alert-dismissible fade show" role="alert">
									{% for message in messages %}
									<div class="alert alert-{{ message.tags }}">
										{{ message }}
									</div>
									{% endfor %}
								</div>
								{% endif %}



							</div>
							<!--end::Page title-->

						</div>
						<!--end::Container-->
					</div>
					<!--end::Toolbar-->
					<!--begin::Entry-->
					<div class="d-flex flex-column-fluid">
						<!--begin::Container-->
						<div class="container-xxl">
							<!--begin::Card-->
							<div class="card card-custom gutter-b">
								<div class="card-body">
									<div class="d-flex">

										<!--begin: Info-->
										<div class="flex-grow-1">
											<!--begin: Title-->
											<div class="d-flex align-items-center justify-content-between flex-wrap">
												<div class="mr-3">
													<!--begin::Name-->
													<h3>{{ customer.address}}
														{% if customer.apartment != None and customer.apartment != "" %}
														, {{ customer.apartment }} {% endif %}
														{% if customer.city != None and customer.city != "" %}
														, {{ customer.city }} {% endif %}
														{% if customer.state != None and customer.state != "" %}
														, {{ customer.state }} {% endif %}
														{% if customer.zipcode != None and customer.zipcode != "" %}
														, {{ customer.zipcode }} {% endif %}
													</h3>
													<!--end::Name-->
													<!--begin::Contacts-->
													<div class="d-flex flex-wrap my-2">
														<a href="#" class="d-flex align-items-center text-gray-400 text-hover-primary me-5 mb-2">
															<!--begin::Svg Icon | path: icons/duotune/communication/com006.svg-->
															<span class="svg-icon svg-icon-4 me-1">
																<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
																	<path opacity="0.3" d="M22 12C22 17.5 17.5 22 12 22C6.5 22 2 17.5 2 12C2 6.5 6.5 2 12 2C17.5 2 22 6.5 22 12ZM12 7C10.3 7 9 8.3 9 10C9 11.7 10.3 13 12 13C13.7 13 15 11.7 15 10C15 8.3 13.7 7 12 7Z" fill="black"></path>
																	<path d="M12 22C14.6 22 17 21 18.7 19.4C17.9 16.9 15.2 15 12 15C8.8 15 6.09999 16.9 5.29999 19.4C6.99999 21 9.4 22 12 22Z" fill="black"></path>
																</svg>
															</span>
															<!--end::Svg Icon-->
															{{ customer.name}}
														</a>
																																										
														<a href="#" class="d-flex align-items-center text-gray-400 text-hover-primary me-5 mb-2">
															<!--begin::Svg Icon | path: icons/duotune/general/gen018.svg-->
															<span class="svg-icon svg-icon-4 me-1">
																<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
																	<path opacity="0.3" d="M18.0624 15.3453L13.1624 20.7453C12.5624 21.4453 11.5624 21.4453 10.9624 20.7453L6.06242 15.3453C4.56242 13.6453 3.76242 11.4453 4.06242 8.94534C4.56242 5.34534 7.46242 2.44534 11.0624 2.04534C15.8624 1.54534 19.9624 5.24534 19.9624 9.94534C20.0624 12.0453 19.2624 13.9453 18.0624 15.3453Z" fill="black"></path>
																	<path d="M12.0624 13.0453C13.7193 13.0453 15.0624 11.7022 15.0624 10.0453C15.0624 8.38849 13.7193 7.04535 12.0624 7.04535C10.4056 7.04535 9.06241 8.38849 9.06241 10.0453C9.06241 11.7022 10.4056 13.0453 12.0624 13.0453Z" fill="black"></path>
																</svg>
															</span>
															<!--end::Svg Icon-->
															{{ customer.phone}}
														</a>

														<a href="#" class="d-flex align-items-center text-gray-400 text-hover-primary mb-2">
															<!--begin::Svg Icon | path: icons/duotune/communication/com011.svg-->
															<span class="svg-icon svg-icon-4 me-1">
																<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
																	<path opacity="0.3" d="M21 19H3C2.4 19 2 18.6 2 18V6C2 5.4 2.4 5 3 5H21C21.6 5 22 5.4 22 6V18C22 18.6 21.6 19 21 19Z" fill="black"></path>
																	<path d="M21 5H2.99999C2.69999 5 2.49999 5.10005 2.29999 5.30005L11.2 13.3C11.7 13.7 12.4 13.7 12.8 13.3L21.7 5.30005C21.5 5.10005 21.3 5 21 5Z" fill="black"></path>
																</svg>
															</span>
															<!--end::Svg Icon-->
															{{ customer.email}}
														</a>
														
													</div>
													<!--end::Contacts-->
												</div>
												<div class="my-lg-0 my-1">
													{% if state_new != '' %}
													<a id="aState" href="javascript:state({{ proyect.id }})" class="btn btn-sm btn-info font-weight-bolder text-uppercase">NEXT</a>

													{% endif %}
												</div>
											</div>
											<!--end: Title-->
											<!--begin: Content-->
											<div class="d-flex align-items-center flex-wrap justify-content-between">
												<div class="flex-grow-1 font-weight-bold text-dark-50 py-5 py-lg-2 mr-5">
													
													{% if customer.description != '' %}
													<span class="svg-icon mr-3">
														<!--begin::Svg Icon | path:assets/media/svg/icons/Devices/Display1.svg-->
														<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
															<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
																<rect x="0" y="0" width="24" height="24"/>
																<path d="M12.2674799,18.2323597 L12.0084872,5.45852451 C12.0004303,5.06114792 12.1504154,4.6768183 12.4255037,4.38993949 L15.0030167,1.70195304 L17.5910752,4.40093695 C17.8599071,4.6812911 18.0095067,5.05499603 18.0083938,5.44341307 L17.9718262,18.2062508 C17.9694575,19.0329966 17.2985816,19.701953 16.4718324,19.701953 L13.7671717,19.701953 C12.9505952,19.701953 12.2840328,19.0487684 12.2674799,18.2323597 Z" fill="#000000" fill-rule="nonzero" transform="translate(14.701953, 10.701953) rotate(-135.000000) translate(-14.701953, -10.701953) "/>
																<path d="M12.9,2 C13.4522847,2 13.9,2.44771525 13.9,3 C13.9,3.55228475 13.4522847,4 12.9,4 L6,4 C4.8954305,4 4,4.8954305 4,6 L4,18 C4,19.1045695 4.8954305,20 6,20 L18,20 C19.1045695,20 20,19.1045695 20,18 L20,13 C20,12.4477153 20.4477153,12 21,12 C21.5522847,12 22,12.4477153 22,13 L22,18 C22,20.209139 20.209139,22 18,22 L6,22 C3.790861,22 2,20.209139 2,18 L2,6 C2,3.790861 3.790861,2 6,2 L12.9,2 Z" fill="#000000" fill-rule="nonzero" opacity="0.3"/>
															</g>
														</svg>
														<!--end::Svg Icon-->
													</span>
													{{ customer.description}} <br/> {% endif %}
													{% if customer.notes != None %}
													<span class="svg-icon mr-3">
														<!--begin::Svg Icon | path:assets/media/svg/icons/Devices/Display1.svg-->
														<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
															<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
																<rect x="0" y="0" width="24" height="24"/>
																<path d="M12.2674799,18.2323597 L12.0084872,5.45852451 C12.0004303,5.06114792 12.1504154,4.6768183 12.4255037,4.38993949 L15.0030167,1.70195304 L17.5910752,4.40093695 C17.8599071,4.6812911 18.0095067,5.05499603 18.0083938,5.44341307 L17.9718262,18.2062508 C17.9694575,19.0329966 17.2985816,19.701953 16.4718324,19.701953 L13.7671717,19.701953 C12.9505952,19.701953 12.2840328,19.0487684 12.2674799,18.2323597 Z" fill="#000000" fill-rule="nonzero" transform="translate(14.701953, 10.701953) rotate(-135.000000) translate(-14.701953, -10.701953) "/>
																<path d="M12.9,2 C13.4522847,2 13.9,2.44771525 13.9,3 C13.9,3.55228475 13.4522847,4 12.9,4 L6,4 C4.8954305,4 4,4.8954305 4,6 L4,18 C4,19.1045695 4.8954305,20 6,20 L18,20 C19.1045695,20 20,19.1045695 20,18 L20,13 C20,12.4477153 20.4477153,12 21,12 C21.5522847,12 22,12.4477153 22,13 L22,18 C22,20.209139 20.209139,22 18,22 L6,22 C3.790861,22 2,20.209139 2,18 L2,6 C2,3.790861 3.790861,2 6,2 L12.9,2 Z" fill="#000000" fill-rule="nonzero" opacity="0.3"/>
															</g>
														</svg>
														<!--end::Svg Icon-->
													</span>
													{{ customer.notes}} <br/> {% endif %}
													{% if proyect.description != None %}
													<span class="svg-icon mr-3">
														<!--begin::Svg Icon | path:assets/media/svg/icons/Devices/Display1.svg-->
														<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
															<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
																<rect x="0" y="0" width="24" height="24"/>
																<path d="M12.2674799,18.2323597 L12.0084872,5.45852451 C12.0004303,5.06114792 12.1504154,4.6768183 12.4255037,4.38993949 L15.0030167,1.70195304 L17.5910752,4.40093695 C17.8599071,4.6812911 18.0095067,5.05499603 18.0083938,5.44341307 L17.9718262,18.2062508 C17.9694575,19.0329966 17.2985816,19.701953 16.4718324,19.701953 L13.7671717,19.701953 C12.9505952,19.701953 12.2840328,19.0487684 12.2674799,18.2323597 Z" fill="#000000" fill-rule="nonzero" transform="translate(14.701953, 10.701953) rotate(-135.000000) translate(-14.701953, -10.701953) "/>
																<path d="M12.9,2 C13.4522847,2 13.9,2.44771525 13.9,3 C13.9,3.55228475 13.4522847,4 12.9,4 L6,4 C4.8954305,4 4,4.8954305 4,6 L4,18 C4,19.1045695 4.8954305,20 6,20 L18,20 C19.1045695,20 20,19.1045695 20,18 L20,13 C20,12.4477153 20.4477153,12 21,12 C21.5522847,12 22,12.4477153 22,13 L22,18 C22,20.209139 20.209139,22 18,22 L6,22 C3.790861,22 2,20.209139 2,18 L2,6 C2,3.790861 3.790861,2 6,2 L12.9,2 Z" fill="#000000" fill-rule="nonzero" opacity="0.3"/>
															</g>
														</svg>
														<!--end::Svg Icon-->
													</span>
													{{ proyect.description}} {% endif %}


												</div>
			
												<div class="d-flex flex-wrap align-items-center py-2">

													<div class="flex-grow-1 flex-shrink-0 w-150px w-xl-300px mt-4 mt-sm-0">
														<span class="font-weight-bold">
															<b>State:</b>
														</span>
														
														{% if proyect.state_id == 1 %}
														<div class="fs-6 fw-bold mb-2 badge-light-success col-lg-12">
														{% elif proyect.state_id == 2 %}
														<div class="fs-6 fw-bold mb-2 badge-light-primary col-lg-12">
														{% elif proyect.state_id == 3 %}
														<div class="fs-6 fw-bold mb-2 badge-light-warning col-lg-12">
														{% elif proyect.state_id == 4 %}
														<div class="fs-6 fw-bold mb-2 badge-light-success col-lg-12">
														{% elif proyect.state_id == 5 %}
														<div class="fs-6 fw-bold mb-2 badge-light-info col-lg-12">
														{% elif proyect.state_id == 6 %}
														<div class="fs-6 fw-bold mb-2 badge-light-success col-lg-12">
														{% elif proyect.state_id == 7 %}
														<div class="fs-6 fw-bold mb-2 badge-danger-success col-lg-12">
														{% else %}
														<div class="fs-6 fw-bold mb-2 badge-white-success col-lg-12">
														{% endif %}

														{{proyect.state.name}}
														</div>


														<div class="progress progress-xs mt-2 mb-2">
															<div class="progress-bar bg-success" role="progressbar"
																style="width:{{advance}}%"  
																aria-valuenow="{{advance}}" aria-valuemin="0"
																aria-valuemax="100"></div>
														</div>
														<!-- {{advance}} -->

														<!-- <span class="font-weight-bolder text-dark">{{ proyect.state.name}}</span> -->
													</div>
												</div>
											</div>
											<!--end: Content-->
										</div>
										<!--end: Info-->
									</div>
								</div>
							</div>
							<!--end::Card-->
							<!--begin::Card-->

							<div class="separator-dashed mt-4 mb-6"></div>

							<div class="card card-custom gutter-b">

								<div class="card card-custom">

									<!--begin::Body-->
									<nav>
										<div class="nav nav-tabs" id="nav-tab" role="tablist">

											<button class="nav-link active" id="nav-newItem-tab" data-bs-toggle="tab" data-bs-target="#nav-newItem" type="button" role="tab" aria-controls="nav-newItem" aria-selected="true" {% if proyect.state_id != 1 %} style="display:none" {% endif %}>
												<span class="nav-icon mr-2">
													<span class="svg-icon mr-3">
														<!--begin::Svg Icon | path:assets/media/svg/icons/Devices/Display1.svg-->
														<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
															<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
																<rect x="0" y="0" width="24" height="24"/>
																<path d="M12.4644661,14.5355339 L9.46446609,14.5355339 C8.91218134,14.5355339 8.46446609,14.9832492 8.46446609,15.5355339 C8.46446609,16.0878187 8.91218134,16.5355339 9.46446609,16.5355339 L12.4644661,16.5355339 L12.4644661,17.5355339 C12.4644661,18.6401034 11.5690356,19.5355339 10.4644661,19.5355339 L6.46446609,19.5355339 C5.35989659,19.5355339 4.46446609,18.6401034 4.46446609,17.5355339 L4.46446609,13.5355339 C4.46446609,12.4309644 5.35989659,11.5355339 6.46446609,11.5355339 L10.4644661,11.5355339 C11.5690356,11.5355339 12.4644661,12.4309644 12.4644661,13.5355339 L12.4644661,14.5355339 Z" fill="#000000" opacity="0.3" transform="translate(8.464466, 15.535534) rotate(-45.000000) translate(-8.464466, -15.535534) "/>
																<path d="M11.5355339,9.46446609 L14.5355339,9.46446609 C15.0878187,9.46446609 15.5355339,9.01675084 15.5355339,8.46446609 C15.5355339,7.91218134 15.0878187,7.46446609 14.5355339,7.46446609 L11.5355339,7.46446609 L11.5355339,6.46446609 C11.5355339,5.35989659 12.4309644,4.46446609 13.5355339,4.46446609 L17.5355339,4.46446609 C18.6401034,4.46446609 19.5355339,5.35989659 19.5355339,6.46446609 L19.5355339,10.4644661 C19.5355339,11.5690356 18.6401034,12.4644661 17.5355339,12.4644661 L13.5355339,12.4644661 C12.4309644,12.4644661 11.5355339,11.5690356 11.5355339,10.4644661 L11.5355339,9.46446609 Z" fill="#000000" transform="translate(15.535534, 8.464466) rotate(-45.000000) translate(-15.535534, -8.464466) "/>
															</g>
														</svg>
														<!--end::Svg Icon-->
													</span>
												</span>
												<span class="nav-text font-weight-bold">Add item</span>
											</button>

											<button class="nav-link" id="nav-items-tab" data-bs-toggle="tab" data-bs-target="#nav-items" type="button" role="tab" aria-controls="nav-items" aria-selected="true" onclick="showImgs()">
												<span class="nav-icon mr-2">
													<span class="svg-icon mr-3">
														<!--begin::Svg Icon | path:assets/media/svg/icons/Devices/Display1.svg-->
														<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
															<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
																<rect x="0" y="0" width="24" height="24"/>
																<path d="M10.5,5 L19.5,5 C20.3284271,5 21,5.67157288 21,6.5 C21,7.32842712 20.3284271,8 19.5,8 L10.5,8 C9.67157288,8 9,7.32842712 9,6.5 C9,5.67157288 9.67157288,5 10.5,5 Z M10.5,10 L19.5,10 C20.3284271,10 21,10.6715729 21,11.5 C21,12.3284271 20.3284271,13 19.5,13 L10.5,13 C9.67157288,13 9,12.3284271 9,11.5 C9,10.6715729 9.67157288,10 10.5,10 Z M10.5,15 L19.5,15 C20.3284271,15 21,15.6715729 21,16.5 C21,17.3284271 20.3284271,18 19.5,18 L10.5,18 C9.67157288,18 9,17.3284271 9,16.5 C9,15.6715729 9.67157288,15 10.5,15 Z" fill="#000000"/>
																<path d="M5.5,8 C4.67157288,8 4,7.32842712 4,6.5 C4,5.67157288 4.67157288,5 5.5,5 C6.32842712,5 7,5.67157288 7,6.5 C7,7.32842712 6.32842712,8 5.5,8 Z M5.5,13 C4.67157288,13 4,12.3284271 4,11.5 C4,10.6715729 4.67157288,10 5.5,10 C6.32842712,10 7,10.6715729 7,11.5 C7,12.3284271 6.32842712,13 5.5,13 Z M5.5,18 C4.67157288,18 4,17.3284271 4,16.5 C4,15.6715729 4.67157288,15 5.5,15 C6.32842712,15 7,15.6715729 7,16.5 C7,17.3284271 6.32842712,18 5.5,18 Z" fill="#000000" opacity="0.3"/>
															</g>
														</svg>
														<!--end::Svg Icon-->
													</span>
												</span>
												<span class="nav-text font-weight-bold">Items</span>
											</button>

											<button class="nav-link" id="nav-decorators-tab" data-bs-toggle="tab" data-bs-target="#nav-decorators" type="button" role="tab" aria-controls="nav-decorators" aria-selected="true">
												<span class="nav-icon mr-2">
													<span class="svg-icon mr-3">
														<!--begin::Svg Icon | path:assets/media/svg/icons/Devices/Display1.svg-->
														<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
															<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
																<polygon points="0 0 24 0 24 24 0 24"/>
																<path d="M12,11 C9.790861,11 8,9.209139 8,7 C8,4.790861 9.790861,3 12,3 C14.209139,3 16,4.790861 16,7 C16,9.209139 14.209139,11 12,11 Z" fill="#000000" fill-rule="nonzero" opacity="0.3"/>
																<path d="M3.00065168,20.1992055 C3.38825852,15.4265159 7.26191235,13 11.9833413,13 C16.7712164,13 20.7048837,15.2931929 20.9979143,20.2 C21.0095879,20.3954741 20.9979143,21 20.2466999,21 C16.541124,21 11.0347247,21 3.72750223,21 C3.47671215,21 2.97953825,20.45918 3.00065168,20.1992055 Z" fill="#000000" fill-rule="nonzero"/>
															</g>
														</svg>
														<!--end::Svg Icon-->
													</span>
												</span>
												<span class="nav-text font-weight-bold">Decorators</span>
											</button>
											
											<button class="nav-link" id="nav-notes-tab" data-bs-toggle="tab" data-bs-target="#nav-notes" type="button" role="tab" aria-controls="nav-notes" aria-selected="false"><span class="nav-icon mr-2">
													<span class="svg-icon mr-3">
														<!--begin::Svg Icon | path:assets/media/svg/icons/General/Notification2.svg-->
														<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1"> 
															<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
																<rect x="0" y="0" width="24" height="24"/>
																<path d="M8,17.9148182 L8,5.96685884 C8,5.56391781 8.16211443,5.17792052 8.44982609,4.89581508 L10.965708,2.42895648 C11.5426798,1.86322723 12.4640974,1.85620921 13.0496196,2.41308426 L15.5337377,4.77566479 C15.8314604,5.0588212 16,5.45170806 16,5.86258077 L16,17.9148182 C16,18.7432453 15.3284271,19.4148182 14.5,19.4148182 L9.5,19.4148182 C8.67157288,19.4148182 8,18.7432453 8,17.9148182 Z" fill="#000000" fill-rule="nonzero" transform="translate(12.000000, 10.707409) rotate(-135.000000) translate(-12.000000, -10.707409) "/>
																<rect fill="#000000" opacity="0.3" x="5" y="20" width="15" height="2" rx="1"/>
															</g>
														</svg>
														<!--end::Svg Icon-->
													</span>
												</span>
												<span class="nav-text font-weight-bold">Notes</span>
											</button>											

										</div>
									</nav>
									<div class="card-body">
										<div class="tab-content" id="nav-tabContent">
											<div {% if proyect.state_id != 1 %} class="tab-pane fade" {% else %} class="tab-pane active" {% endif %} id="nav-newItem" role="tabpanel" aria-labelledby="nav-newItem-tab" {% if proyect.state_id != 1 %} style="display:none" {% endif %}>
																								
												<form id="formItem" class="form" method="POST" enctype="multipart/form-data">
													<div class=""> <!--  class="card-body" -->
														
														<div class="card-title fs-6 fw-bolder">Item:</div>
									
														<!--begin::Row-->
														<div class="row">
															<!--begin::Col-->
																														
																<div class="col-lg-6">
	
																	<div class="row mb-6">
	
																		<div class="col-xl-2">
																			<div class="fs-7 fw-bold mt-2 mb-3">Category:</div>
																		</div>
																		<!--end::Col-->
																		<!--begin::Col-->
																		<div class="col-xl-6 fv-row">
																			<!--begin::Input-->
	
																			<select id="selectCategory" class="form-select form-select-solid" name="category">
																				<option value="">---</option>
																				{% for category in categories %}
																				<option value="{{ category.id }}">{{ category.name }}</option>
																				{% endfor %}
																			</select>
	
																			<!--end::Input-->
																		</div>
																		<!--end::Col-->
	
																	</div>
	
																	<div class="row mb-6">
	
																		<!--begin::Col-->
																		<div class="col-xl-2">
																			<div class="fs-7 fw-bold mt-2 mb-3">Sub Category:</div>
																		</div>
																		<!--end::Col-->
																		<!--begin::Col-->
																		<div class="col-xl-6 fv-row">
																			<!--begin::Input-->
																		
																			<select id="selectSubcategory" class="form-select form-select-solid"
																				data-kt-select2="false" data-placeholder="Select"
																				data-allow-clear="true" name="subcategory">
																				<option value="">---</option>
																			</select>
																		
																			<!--end::Input-->
																		</div>
																		<!--end::Col-->
	
																	</div>

																	<div class="row mb-6">
	
																		<!--begin::Col-->
																		<div class="col-xl-2">
																			<div class="fs-7 fw-bold mt-2 mb-3">Group:</div>
																		</div>
																		<!--end::Col-->
																		<!--begin::Col-->
																		<div class="col-xl-6 fv-row">
																			<!--begin::Input-->
																		
																			<select id="selectGroup" class="form-select form-select-solid"
																				data-kt-select2="false" data-placeholder="Select"
																				data-allow-clear="true" name="group">
																				<option value="">---</option>
																			</select>
																		
																			<!--end::Input-->
																		</div>
																		<!--end::Col-->
	
																	</div>
	
																	<div class="row mb-6">
	
																		<!--begin::Col-->
																		<div class="col-xl-2">
																			<div class="fs-7 fw-bold mt-2 mb-3">Place:</div>
																		</div>
																		<!--end::Col-->
																		<!--begin::Col-->
																		<div class="col-xl-6 fv-row">
																			<!--begin::Input-->
	
																			<select id="selectPlace" class="form-select form-select-solid"
																				data-kt-select2="false" data-placeholder="Select"
																				data-allow-clear="true" name="place">
																				<option value="">---</option>
																				{% for place in places %}
																				<option value="{{ place.id }}">{{ place.name }}</option>
																				{% endfor %}
																			</select>
	
																			<!--end::Input-->
																		</div>
																		<!--end::Col-->
																	</div>
	
																	<div class="row mb-6">
	
																		<!--begin::Col-->
																		<div class="col-xl-2">
																			<div class="fs-7 fw-bold mt-2 mb-3">QTY:</div>
																		</div>
																		<!--end::Col-->
	
																		<div class="col-xl-6 fv-row">
																			<input id="inputQty" type="text" class="form-control form-control-solid" name="qty" value="" maxlength="100"/>
																		</div>
	
																	</div>

																	<div class="row mb-6">
																		<!--begin::Col-->
																		<div class="col-xl-2">																			
																			<div class="fs-7 fw-bold mt-2 mb-3">Proposed date:</div>
																		</div>

																		<div class="col-xl-6 fv-row">
																			<!--begin::Svg Icon | path: icons/duotune/general/gen014.svg-->
																			<span class="svg-icon position-absolute ms-4 mb-1 svg-icon-2">
																				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
																					viewBox="0 0 24 24" fill="none">
																					<path opacity="0.3"
																						d="M21 22H3C2.4 22 2 21.6 2 21V5C2 4.4 2.4 4 3 4H21C21.6 4 22 4.4 22 5V21C22 21.6 21.6 22 21 22Z"
																						fill="black" />
																					<path
																						d="M6 6C5.4 6 5 5.6 5 5V3C5 2.4 5.4 2 6 2C6.6 2 7 2.4 7 3V5C7 5.6 6.6 6 6 6ZM11 5V3C11 2.4 10.6 2 10 2C9.4 2 9 2.4 9 3V5C9 5.6 9.4 6 10 6C10.6 6 11 5.6 11 5ZM15 5V3C15 2.4 14.6 2 14 2C13.4 2 13 2.4 13 3V5C13 5.6 13.4 6 14 6C14.6 6 15 5.6 15 5ZM19 5V3C19 2.4 18.6 2 18 2C17.4 2 17 2.4 17 3V5C17 5.6 17.4 6 18 6C18.6 6 19 5.6 19 5Z"
																						fill="black" />
																					<path
																						d="M8.8 13.1C9.2 13.1 9.5 13 9.7 12.8C9.9 12.6 10.1 12.3 10.1 11.9C10.1 11.6 10 11.3 9.8 11.1C9.6 10.9 9.3 10.8 9 10.8C8.8 10.8 8.59999 10.8 8.39999 10.9C8.19999 11 8.1 11.1 8 11.2C7.9 11.3 7.8 11.4 7.7 11.6C7.6 11.8 7.5 11.9 7.5 12.1C7.5 12.2 7.4 12.2 7.3 12.3C7.2 12.4 7.09999 12.4 6.89999 12.4C6.69999 12.4 6.6 12.3 6.5 12.2C6.4 12.1 6.3 11.9 6.3 11.7C6.3 11.5 6.4 11.3 6.5 11.1C6.6 10.9 6.8 10.7 7 10.5C7.2 10.3 7.49999 10.1 7.89999 10C8.29999 9.90003 8.60001 9.80003 9.10001 9.80003C9.50001 9.80003 9.80001 9.90003 10.1 10C10.4 10.1 10.7 10.3 10.9 10.4C11.1 10.5 11.3 10.8 11.4 11.1C11.5 11.4 11.6 11.6 11.6 11.9C11.6 12.3 11.5 12.6 11.3 12.9C11.1 13.2 10.9 13.5 10.6 13.7C10.9 13.9 11.2 14.1 11.4 14.3C11.6 14.5 11.8 14.7 11.9 15C12 15.3 12.1 15.5 12.1 15.8C12.1 16.2 12 16.5 11.9 16.8C11.8 17.1 11.5 17.4 11.3 17.7C11.1 18 10.7 18.2 10.3 18.3C9.9 18.4 9.5 18.5 9 18.5C8.5 18.5 8.1 18.4 7.7 18.2C7.3 18 7 17.8 6.8 17.6C6.6 17.4 6.4 17.1 6.3 16.8C6.2 16.5 6.10001 16.3 6.10001 16.1C6.10001 15.9 6.2 15.7 6.3 15.6C6.4 15.5 6.6 15.4 6.8 15.4C6.9 15.4 7.00001 15.4 7.10001 15.5C7.20001 15.6 7.3 15.6 7.3 15.7C7.5 16.2 7.7 16.6 8 16.9C8.3 17.2 8.6 17.3 9 17.3C9.2 17.3 9.5 17.2 9.7 17.1C9.9 17 10.1 16.8 10.3 16.6C10.5 16.4 10.5 16.1 10.5 15.8C10.5 15.3 10.4 15 10.1 14.7C9.80001 14.4 9.50001 14.3 9.10001 14.3C9.00001 14.3 8.9 14.3 8.7 14.3C8.5 14.3 8.39999 14.3 8.39999 14.3C8.19999 14.3 7.99999 14.2 7.89999 14.1C7.79999 14 7.7 13.8 7.7 13.7C7.7 13.5 7.79999 13.4 7.89999 13.2C7.99999 13 8.2 13 8.5 13H8.8V13.1ZM15.3 17.5V12.2C14.3 13 13.6 13.3 13.3 13.3C13.1 13.3 13 13.2 12.9 13.1C12.8 13 12.7 12.8 12.7 12.6C12.7 12.4 12.8 12.3 12.9 12.2C13 12.1 13.2 12 13.6 11.8C14.1 11.6 14.5 11.3 14.7 11.1C14.9 10.9 15.2 10.6 15.5 10.3C15.8 10 15.9 9.80003 15.9 9.70003C15.9 9.60003 16.1 9.60004 16.3 9.60004C16.5 9.60004 16.7 9.70003 16.8 9.80003C16.9 9.90003 17 10.2 17 10.5V17.2C17 18 16.7 18.4 16.2 18.4C16 18.4 15.8 18.3 15.6 18.2C15.4 18.1 15.3 17.8 15.3 17.5Z"
																						fill="black" />
																				</svg>
																			</span>
																			<!--end::Svg Icon-->
																			<input class="form-control form-control-solid ps-12" name="date_proposed" placeholder="Pick a date" id="kt_datepicker" />
																		</div>


																	</div>
	
																	<div class="row mb-6">
																		<!--begin::Col-->
																		<div class="col-xl-2">
																			<div class="fs-7 fw-bold mt-2 mb-3">Notes:</div>
																		</div>
																		<!--end::Col-->
																		<!--begin::Col-->
																		<div class="col-xl-9 fv-row">
																			<textarea id="textareaNotes" name="notes"
																				class="form-control form-control-solid h-100px"
																				maxlength="2000"></textarea>																	
																		</div>
																		<!--begin::Col-->
																	</div>

																</div>
																	
															<!--begin::Col-->
															<div id="divAttributes" class="col-lg-6">

															</div>

														</div>

														<div class="card-title fs-4 fw-bolder">Add images <i class="fas fa-cloud-upload-alt"></i></div><div class="card-title fs-8 fw-bolder">(jpeg, png, bmp)</div>

														<div id="divImages">

															<div id="divImg_1" class="row">
																
																<div class="col-lg-4">
	
																	<div class="row mb-2">
																		
																		<div id="previewContainer_1" class="image-container"></div>
																		<input id="inputImg_1" type="file" name="inputImg_1" class="form-control form-control" onchange="previewImages(event, 1)" required>															
	
																	</div>
	
																</div>
																
																<div id="divImgNotes_1" class="col-lg-7" style="display: none;">
	
																	<div class="row mb-6">
																																			
																		<div class="col-xl-11 fv-row">
																			<div class="fs-7 fw-bold mt-2 mb-3">Description:</div>
																			<textarea id="txtImgNotes_1" name="txtImgNotes_1" class="form-control form-control-solid h-150px" maxlength="2000"></textarea><br/>
																			<div class="form-check form-check-custom form-check-solid me-9">
																				<input class="form-check-input" type="checkbox" id="chkImgType_1" name="chkImgType_1" />
																				<label class="form-check-label ms-3" for="email">Material</label>
																			</div>
																		</div>																	
																	</div>
	
																</div>
	
																<div id="divImgDel_1" class="col-lg-1" style="display: none;">
	
																	<div class="row mb-2">
																																			
																		<a href="javascript:del_img(1)" class="btn btn-icon btn-bg-light btn-active-color-primary btn-sm">
																			<!--begin::Svg Icon | path: icons/duotune/general/gen027.svg-->
																			<span class="svg-icon svg-icon-3" title="Delete image">
																				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
																					<path d="M5 9C5 8.44772 5.44772 8 6 8H18C18.5523 8 19 8.44772 19 9V18C19 19.6569 17.6569 21 16 21H8C6.34315 21 5 19.6569 5 18V9Z" fill="black" />
																					<path opacity="0.5" d="M5 5C5 4.44772 5.44772 4 6 4H18C18.5523 4 19 4.44772 19 5V5C19 5.55228 18.5523 6 18 6H6C5.44772 6 5 5.55228 5 5V5Z" fill="black" />
																					<path opacity="0.5" d="M9 4C9 3.44772 9.44772 3 10 3H14C14.5523 3 15 3.44772 15 4V4H9V4Z" fill="black" />
																				</svg>
																			</span>
																			<!--end::Svg Icon-->
																		</a>
																		
																	</div>
	
																</div>

															</div>

															<br/>

														</div>

														<input id="proyect_id" name="proyect_id" type="hidden" value="{{ proyect.id }}" readonly/>
														
														<div class="card-footer d-flex justify-content-end py-6 px-9">
															<button id="reset" type="reset" class="btn btn-light btn-active-light-primary me-2 px-8 py-2 mr-4" onclick="cleanItemForm()">Clean</button>
															<button type="submit" class="btn btn-primary px-8 py-2 mr-4" id="submitItem">Save</button>
														</div>

													</div>
	
												</form>
																																											 
											</div>

											<div {% if proyect.state_id != 1 %} class="tab-pane active" {% else %} class="tab-pane fade" {% endif %} id="nav-items" role="tabpanel">

												<div>

													<div class="card-title fs-6 fw-bolder">Items list:</div>

													<div id="messageSave">

													</div>

													<div id="itemsDetails">
														{{ itemsHtml|safe }}
													</div>																										
																	
												</div>

											</div>

											<div class="tab-pane fade" id="nav-decorators" role="tabpanel" >

												<div>
													<div class="card-title fs-6 fw-bolder">Decorators:</div>
													{{ decoratorsHTML|safe }}

													<br/>

													<div class="card-title fs-6 fw-bolder">Ascociates:</div>
													{{ ascociatesHTML|safe }}
												</div>

											</div>
											
											<div class="tab-pane fade" id="nav-notes" role="tabpanel" >

												<div>
													<div class="row mb-8">
														<!--begin::Col-->
														<div class="col-xl-1">
															<div class="fs-7 fw-bold mt-2 mb-3">Comment</div>
														</div>
														<!--end::Col-->
														<!--begin::Col-->
														<div class="col-xl-11 fv-row">
															<textarea id="textareaDescProyect" name="proyectDescription"
																class="form-control form-control-solid h-70px"
																maxlength="2000"></textarea>
														</div>

														<div class="d-flex justify-content-end py-6 px-9">
														
															<button type="submit" class="btn btn-primary px-8 py-2 mr-4">Save</button>
														</div>
														<!--begin::Col-->
													</div>

													<!--begin::Card footer-->
													<div class="card-footer d-flex justify-content-end py-6 px-9">
														
													</div>
													<!--end::Card footer-->

												</div>

												<div class="timeline">

													{{ notesHTML|safe }}

												</div>
												



											</div>

										</div>
									</div>
									<!--end::Body-->
								</div>

							</div>
							<!--end::Card-->
						</div>
						<!--end::Container-->
					</div>
					<!--end::Entry-->

				</div>
					<!--end::Content-->					
					<!--begin::Footer-->
					{% include 'footer.html' %}
					<!--end::Footer-->
				</div>
				<!--end::Wrapper-->
			</div>
			<!--end::Page-->
		</div>
		<!--end::Root-->
		<!--begin::Drawers-->

		<!--begin::Scrolltop-->
		<div id="kt_scrolltop" class="scrolltop" data-kt-scrolltop="true">
			<!--begin::Svg Icon | path: icons/duotune/arrows/arr066.svg-->
			<span class="svg-icon">
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
					<rect opacity="0.5" x="13" y="6" width="13" height="2" rx="1" transform="rotate(90 13 6)"
						fill="black" />
					<path
						d="M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z"
						fill="black" />
				</svg>
			</span>
			<!--end::Svg Icon-->
		</div>
		<!--end::Scrolltop-->
		<!--end::Main-->
		<!--<script>var hostUrl = "assets/";</script>-->
		<!--begin::Javascript-->
		<!--begin::Global Javascript Bundle(used by all pages)-->

		<script>var KTAppSettings = { "breakpoints": { "sm": 576, "md": 768, "lg": 992, "xl": 1200, "xxl": 1400 }, "colors": { "theme": { "base": { "white": "#ffffff", "primary": "#3699FF", "secondary": "#E5EAEE", "success": "#1BC5BD", "info": "#8950FC", "warning": "#FFA800", "danger": "#F64E60", "light": "#E4E6EF", "dark": "#181C32" }, "light": { "white": "#ffffff", "primary": "#E1F0FF", "secondary": "#EBEDF3", "success": "#C9F7F5", "info": "#EEE5FF", "warning": "#FFF4DE", "danger": "#FFE2E5", "light": "#F3F6F9", "dark": "#D6D6E0" }, "inverse": { "white": "#ffffff", "primary": "#ffffff", "secondary": "#3F4254", "success": "#ffffff", "info": "#ffffff", "warning": "#ffffff", "danger": "#ffffff", "light": "#464E5F", "dark": "#ffffff" } }, "gray": { "gray-100": "#F3F6F9", "gray-200": "#EBEDF3", "gray-300": "#E4E6EF", "gray-400": "#D1D3E0", "gray-500": "#B5B5C3", "gray-600": "#7E8299", "gray-700": "#5E6278", "gray-800": "#3F4254", "gray-900": "#181C32" } }, "font-family": "Poppins" };</script>

		<script src="{% static 'js/jquery.min.js' %}"></script>

		<script src="{% static 'js/plugins.bundle.js' %}"></script>
		<script src="{% static 'js/scripts.bundle.js' %}"></script>
		<script src="{% static 'js/settingsView.js' %}"></script>
		<script src="{% static 'js/jquery.mask.min.js' %}"></script>
		
		<script src="{% static 'js/galery/imagesloaded.pkgd.min.js' %}"></script>
		<script src="{% static 'js/galery/isotope.pkgd.min.js' %}"></script>
		<script src="{% static 'js/galery/masonry.pkgd.min.js' %}"></script>
		<script src="{% static 'js/galery/jquery.fancybox.js' %}"></script>
		<script src="{% static 'js/galery/gallery.js' %}"></script>
		

		<script>
						
			var div = document.getElementById('kt_activities_toggle');
			div.parentNode.remove();	

			$(document).ready(function () {

				// $("#inputQty").mask('0000'); // Formato de número 4 digitos	
				$('.grid-gallery').masonry_gallery();
				$("#kt_datepicker").flatpickr({ enableTime: false, dateFormat: "Y-m-d" });				

			});

			$('#selectCategory').change(function() {
                loadSubcategory();
				loadAttributes();
				loadGroup();
            });

			$('#selectSubcategory').change(function() {
				loadGroup();
            });


			
			function loadSubcategory(){	
				var selectValue = $("#selectCategory").val();			
								
				if(selectValue != "" ) {				

					$.ajax({
						url: "{% url 'getSelectSubcategory_url' %}",  // La URL que manejará la consulta AJAX
						method: 'POST',
						data: {
							'categorySelect': selectValue  // El valor que se envía al servidor
						},
						beforeSend: function(xhr, settings) {
							// Añadir el token CSRF en las cabeceras
							xhr.setRequestHeader('X-CSRFToken', $('meta[name="csrf-token"]').attr('content'));
						},
						success: function(response) {
							// Rellena los campos con los datos obtenidos de la respuesta
							$('#selectSubcategory').html(response.result);
						},
						error: function(xhr, status, error) {
							console.error("Error server: " + error, event.error);							
						}
					});				
					
				}

			}


			function loadGroup(){	
				
				var selectValue1 = $("#selectCategory").val();			
				var selectValue2 = $("#selectSubcategory").val();
								
				if(selectValue1 != "" && selectValue2 != "") {				

					$.ajax({
						url: "{% url 'getSelectGroup_url' %}",  // La URL que manejará la consulta AJAX
						method: 'POST',
						data: {
							'categorySelect': selectValue1,  // El valor que se envía al servidor
							'subcategorySelect': selectValue2
						},
						beforeSend: function(xhr, settings) {
							// Añadir el token CSRF en las cabeceras
							xhr.setRequestHeader('X-CSRFToken', $('meta[name="csrf-token"]').attr('content'));
						},
						success: function(response) {
							// Rellena los campos con los datos obtenidos de la respuesta
							$('#selectGroup').html(response.result);
						},
						error: function(xhr, status, error) {
							console.error("Error server: " + error, event.error);							
						}
					});				
					
				}

			}


			function loadAttributes(){	
				var selectValue = $("#selectCategory").val();			
								
				if(selectValue != "" ) {				

					$.ajax({
						url: "{% url 'getSelectAttribute_url' %}",  // La URL que manejará la consulta AJAX
						method: 'POST',
						data: {
							'categorySelect': selectValue  // El valor que se envía al servidor
						},
						beforeSend: function(xhr, settings) {
							// Añadir el token CSRF en las cabeceras
							xhr.setRequestHeader('X-CSRFToken', $('meta[name="csrf-token"]').attr('content'));
						},
						success: function(response) {
							// Rellena los campos con los datos obtenidos de la respuesta
							$('#divAttributes').html(response.result);
						},
						error: function(xhr, status, error) {
							console.error("Error server: " + error, event.error);							
						}
					});				
					
				}

			}


			function loadItems(){
				var selectValue = $("#proyect_id").val();			
								
				if(selectValue != "" ) {				

					$.ajax({
						url: "{% url 'getSelectItems_url' %}",  // La URL que manejará la consulta AJAX
						method: 'POST',
						data: {
							'proyect_id': selectValue  // El valor que se envía al servidor
						},
						beforeSend: function(xhr, settings) {
							// Añadir el token CSRF en las cabeceras
							xhr.setRequestHeader('X-CSRFToken', $('meta[name="csrf-token"]').attr('content'));
						},
						success: function(response) {
							// Rellena los campos con los datos obtenidos de la respuesta
							$('#itemsDetails').html(response.result);
							$('.grid-gallery').masonry_gallery();							
							$('html, body').animate({ scrollTop: 0 }, 'fast');
							cleanItemForm();
							showImgs();

						},
						error: function(xhr, status, error) {
							console.error("Error server: " + error, event.error);							
						}
					});				
					
				}
			}
			

			function del(i){

				Swal.fire({
					title: 'Are you sure?',
					text: 'This action will delete the item. Do you want to continue?',
					icon: 'warning',
					showCancelButton: true,  // Muestra el botón de cancelación
					confirmButtonText: 'Yes',
					cancelButtonText: 'Cancel'
				}).then((result) => {
					if (result.isConfirmed) {
						// Si el usuario confirma, se ejecuta la acción AJAX
						$.ajax({
							url: "{% url 'deleteItem_url' %}",  // La URL que manejará la consulta AJAX
							method: 'POST',
							data: {
								'i': i  // El valor que se envía al servidor
							},
							beforeSend: function(xhr, settings) {
								// Añadir el token CSRF en las cabeceras
								xhr.setRequestHeader('X-CSRFToken', $('meta[name="csrf-token"]').attr('content'));
							},
							success: function(response) {
								// Rellena los campos con los datos obtenidos de la respuesta
								if(response.result == "1"){
									loadItems();
									$('.grid-gallery').masonry_gallery();

									Swal.fire({
										title: 'Deleted!',
										text: 'The item has been successfully deleted.',
										icon: 'info',
										confirmButtonText: 'Ok.'
									});
								}

								
							},
							error: function(xhr, status, error) {																
								Swal.fire({
										title: 'Error server!',
										text: error,
										icon: 'error',
										confirmButtonText: 'Ok.'
									});

							}
						});	
					}
				});
			}


			function del_img(i){

				Swal.fire({
					title: 'Are you sure?',
					text: 'Do you want to delete the image?',
					icon: 'warning',
					showCancelButton: true,  // Muestra el botón de cancelación
					confirmButtonText: 'Yes',
					cancelButtonText: 'Cancel'
				}).then((result) => {
					if (result.isConfirmed) {																		
						divImg = '#divImg_' + String(i);						
						$(divImg).remove();

					}
				});
			}


			function previewImages(event, id) {

				div = 'previewContainer_' + String(id)
				divNotes = '#divImgNotes_' + String(id)
				divDel = '#divImgDel_' + String(id)
				inputImg = '#inputImg_' + String(id)

				const previewContainer = document.getElementById(div);
				previewContainer.innerHTML = ''; // Limpiar las imágenes previas

				const files = event.target.files;

				// Crear una vista previa para cada imagen seleccionada
				for (const file of files) {
					const reader = new FileReader();
					
					reader.onload = function(e) {
						const img = document.createElement('img');
						img.src = e.target.result;
						img.classList.add('preview');
						img.name = 'images';
						previewContainer.appendChild(img);
						$(divNotes).css('display', '');
						$(divDel).css('display', '');
						$(inputImg).css('display', 'none');
						newImagesDiv(id);

					};
					
					reader.readAsDataURL(file);
				}
			}


			function newImagesDiv(id){

				newId = id + 1;
				divNotes = '#divImg_' + String(id)
				
				html = '<br/>';
				html += '<div id="divImg_' + String(newId) + '" class="row">';
				
				html += '<div class="col-lg-4">';				
				html +=	'<div class="row mb-2">';
				html += '<div id="previewContainer_' + String(newId) + '" class="image-container"></div>';
				html +=	'<input id="inputImg_' + String(newId) + '" type="file" name="inputImg_' + String(newId) + '" class="form-control form-control" onchange="previewImages(event, ' + String(newId) + ')" required>';
				html += '</div></div>';

				html += '<div id="divImgNotes_' + String(newId) + '" class="col-lg-7" style="display: none;">';
				html += '<div class="row mb-6">';
				html += '<div class="col-xl-11 fv-row">';
				html += '<div class="fs-7 fw-bold mt-2 mb-3">Description:</div>';
				html += '<textarea id="txtImgNotes_' + String(newId) + '" name="txtImgNotes_' + String(newId) + '" class="form-control form-control-solid h-150px" maxlength="2000"></textarea><br/>';
				html += '<div class="form-check form-check-custom form-check-solid me-9">';
				html += '<input class="form-check-input" type="checkbox" id="chkImgType_' + String(newId) + '" name="chkImgType_' + String(newId) + '" />';
				html += '<label class="form-check-label ms-3" for="email">Material</label>';
				html += '</div></div></div></div>';
				
				html += '<div id="divImgDel_' + String(newId) + '" class="col-lg-1" style="display: none;">';
				html += '<div class="row mb-2">';
				html += '<a href="javascript:del_img(' + String(newId) + ')" class="btn btn-icon btn-bg-light btn-active-color-primary btn-sm">';
				html += '<span class="svg-icon svg-icon-3" title="Delete image">';
				html += '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">';
				html += '<path d="M5 9C5 8.44772 5.44772 8 6 8H18C18.5523 8 19 8.44772 19 9V18C19 19.6569 17.6569 21 16 21H8C6.34315 21 5 19.6569 5 18V9Z" fill="black" />';
				html += '<path opacity="0.5" d="M5 5C5 4.44772 5.44772 4 6 4H18C18.5523 4 19 4.44772 19 5V5C19 5.55228 18.5523 6 18 6H6C5.44772 6 5 5.55228 5 5V5Z" fill="black" />';
				html += '<path opacity="0.5" d="M9 4C9 3.44772 9.44772 3 10 3H14C14.5523 3 15 3.44772 15 4V4H9V4Z" fill="black" />';
				html += '</svg>';
				html += '</span>';
				html += '</a>';
				html += '</div></div>';

				html += '</div>';

				if(id != 0){
					$(divNotes).after(html);
				}
				else{
					return html;
				}

			}


			function cleanItemForm(){
				var select = document.getElementById('selectCategory');				
				select.selectedIndex = 0; // Establece el primer elemento como seleccionado
				
				select = document.getElementById('selectPlace');
				select.selectedIndex = 0; // Establece el primer elemento como seleccionado				

				$('#selectSubcategory').html('');
				$('#divAttributes').html('');				
				$('#divImages').html(newImagesDiv(0));

			}


			function showImgs(){
							
				$('.showImg').each(function() {					
					$(this).click();
				});
			}


			function state(i){

				var state = document.querySelector('#aState').textContent;
				var state = "next";
				Swal.fire({
					title: 'Are you sure?',
					text: 'Do you want to advance to ' + state + ' status?',
					icon: 'warning',
					showCancelButton: true,  // Muestra el botón de cancelación
					confirmButtonText: 'Yes',
					cancelButtonText: 'Cancel'
				}).then((result) => {
					if (result.isConfirmed) {

						var cant = $('.itemCount').length;

						if(cant > 0){						
							
							$.ajax({
								url: "{% url 'updateStatus_url' %}",  // La URL que manejará la consulta AJAX
								method: 'POST',
								data: {
									'i': i  // El valor que se envía al servidor
								},
								beforeSend: function(xhr, settings) {
									// Añadir el token CSRF en las cabeceras
									xhr.setRequestHeader('X-CSRFToken', $('meta[name="csrf-token"]').attr('content'));
								},
								success: function(response) {
									// Rellena los campos con los datos obtenidos de la respuesta
									if(response.result == "1"){										
										window.location.reload();										
									}									
								},
								error: function(xhr, status, error) {																
									Swal.fire({
											title: 'Error server!',
											text: error,
											icon: 'error',
											confirmButtonText: 'Ok.'
										});

								}
							});	

						}
						else{
							Swal.fire({
								title: 'Alert!',
								text: 'You must add items.',
								icon: 'info',
								confirmButtonText: 'Ok.'
							});
						}
					}
				});
				}


			function saveIC(i){

				var p = $('#proyect_id').val()				
				var formData = new FormData();  // Creamos un objeto FormData vacío
				formData.append('id1', p);
				formData.append('id2', i);
				// Serializamos los datos del formulario (excepto los archivos)
				var serializedData = $('#formItem_' + String(i)).serialize();
							
				// Convertimos los datos serializados en un objeto y lo agregamos al FormData
				var params = serializedData.split('&');
				params.forEach(function(param) {
					var keyValue = param.split('=');
					var key = decodeURIComponent(keyValue[0]);
					var value = decodeURIComponent(keyValue[1] || '');
					formData.append(key, value);
				});

				var inputFile = $('#formItem_' + String(i) + ' input[type="file"]')[0];  // Seleccionamos el input dentro de form1
				
				if (inputFile && inputFile.files.length > 0) {

					for (var i = 0; i < inputFile.files.length; i++) {
						formData.append('files[]', inputFile.files[i]); // Usamos '[]' para manejar múltiples archivos
					}
				}
			
				$.ajax({
					type: "POST",
					url: "../../saveItemComment/",  // Reemplaza con la URL de tu vista
					data: formData,
					processData: false,  // Esto es importante para enviar archivos correctamente
					contentType: false,  // Evitar que jQuery configure el tipo de contenido automáticamente
					beforeSend: function(xhr, settings) {
						// Añadir el token CSRF en las cabeceras
						xhr.setRequestHeader('X-CSRFToken', $('meta[name="csrf-token"]').attr('content'));
					},
					success: function(response) {
						if(response.result = "OK"){
							loadItems();
						}						
					},
					error: function() {
						console.error("Error server: " + error, event.error);
					}
				});

			}


			function delImC(o,i,t,e){

				var p = $('#proyect_id').val()				
				$.ajax({					
					url: "{% url 'deleteItemCommentFile_url' %}",  // La URL que manejará la consulta AJAX
					method: 'POST',
					data: {
						'i': i,
						't': t,
						'p': p,
						'e': e
					},
					beforeSend: function(xhr, settings) {
						// Añadir el token CSRF en las cabeceras
						xhr.setRequestHeader('X-CSRFToken', $('meta[name="csrf-token"]').attr('content'));
					},
					success: function(response) {
						// Rellena los campos con los datos obtenidos de la respuesta
						if(response.result == "1"){
							const pad = o.parentNode;
							pad.remove();
						}						
					},
					error: function(xhr, status, error) {																
						Swal.fire({
								title: 'Error server!',
								text: error,
								icon: 'error',
								confirmButtonText: 'Ok.'
							});

					}
				});	
			}


		</script>

</body>
<!--end::Body-->

</html>